:root {
    --mx: 50%;
    --my: 50%;
    --s: 1;
    --o: 0;
    --tx: 0px;
    --ty: 0px;
    --rx: 0deg;
    --ry: 0deg;
    --pos: 50% 50%;
    --posx: 50%;
    --posy: 50%;
    --hyp: 0;
}

.holo-card {
    /* Common variables */
    --radius: 0.75rem;
    /* rounded-xl matches roughly */
    z-index: calc(var(--s) * 100);
    transform: translate3d(0, 0, 0.1px);
    will-change: transform, visibility;
    transform-style: preserve-3d;
}

.holo-card__rotator {
    display: grid;
    perspective: 600px;
    transform-origin: center;
    will-change: transform;
    /* Transformation is handled by Framer Motion in JS */
}

/* Glare & Shine container styling */
.holo-card__rotator>* {
    width: 100%;
    display: grid;
    grid-area: 1/1;
    border-radius: var(--radius);
    image-rendering: optimizeQuality;
    transform-style: preserve-3d;
}

.holo-card__glare {
    /* mix-blend-mode: overlay; */
    opacity: 0;
    /* Hidden by default, shown on hover/move via JS variables if desired, or always opaque? Codepen varies opacity */
    z-index: 10;
}

.holo-card__shine {
    display: grid;
    overflow: hidden;
    z-index: 5;
    background: transparent;
    mix-blend-mode: color-dodge;
    filter: brightness(0.85) contrast(2.75) saturate(0.65);
    opacity: var(--o);
    /* Visibility controlled by opacity var */
}

/* Galaxy Holo Effect */
.holo-card[data-rarity="galaxy"] .holo-card__glare {
    background-image: radial-gradient(farthest-corner circle at var(--mx) var(--my),
            rgba(222, 245, 250, 0.7) 10%,
            rgba(255, 255, 255, 0.5) 20%,
            rgba(0, 0, 0, 0.5) 90%);
    opacity: var(--o);
}

.holo-card[data-rarity="galaxy"] .holo-card__shine {
    --space: 80px;
    --h: 21;
    --s: 70%;
    --l: 50%;
    --bars: 50px;
    --bar-color: rgba(255, 255, 255, 0.6);
    --bar-bg: rgb(10, 10, 10);

    clip-path: inset(2px);
    /* Slight inset to not bleed over borders */

    background-image:
        url("https://res.cloudinary.com/simey/image/upload/Dev/PokemonCards/galaxy.png"),
        url("https://res.cloudinary.com/simey/image/upload/Dev/PokemonCards/galaxy.png"),
        url("https://res.cloudinary.com/simey/image/upload/Dev/PokemonCards/galaxy.png"),
        repeating-linear-gradient(82deg,
            rgb(218, 56, 50) calc(var(--space) * 1),
            rgb(219, 204, 86) calc(var(--space) * 2),
            rgb(121, 199, 58) calc(var(--space) * 3),
            rgb(58, 192, 183) calc(var(--space) * 4),
            rgb(71, 98, 207) calc(var(--space) * 5),
            rgb(170, 69, 209) calc(var(--space) * 6),
            rgb(218, 56, 50) calc(var(--space) * 10)),
        radial-gradient(farthest-corner circle at var(--mx) var(--my),
            rgba(255, 255, 255, 0.6) 5%,
            rgba(150, 150, 150, 0.3) 40%,
            rgb(0, 0, 0) 100%);

    background-blend-mode: color-dodge, color-burn, saturation, screen;
    background-position: center, center, center,
        calc(((50% - var(--posx)) * 2.5) + 50%) calc(((50% - var(--posy)) * 2.5) + 50%),
        center;
    background-size: cover, cover, cover, 600% 1200%, cover;

    filter: brightness(0.75) contrast(1.2) saturate(1.5);
    mix-blend-mode: color-dodge;
}

/* Radiant Effect (Cleaner, maybe nice alternative) */
.holo-card[data-rarity="radiant"] .holo-card__shine {
    --barwidth: 1.2%;
    --space: 200px;
    clip-path: inset(2px);

    background-image: repeating-linear-gradient(55deg,
            rgb(255, 161, 158) calc(var(--space) * 1),
            rgb(85, 178, 255) calc(var(--space) * 2),
            rgb(255, 199, 146) calc(var(--space) * 3),
            rgb(130, 255, 213) calc(var(--space) * 4),
            rgb(253, 170, 240) calc(var(--space) * 5),
            rgb(148, 241, 255) calc(var(--space) * 6),
            rgb(255, 161, 158) calc(var(--space) * 7)),
        repeating-linear-gradient(45deg,
            hsl(0, 0%, 10%) 0%,
            hsl(0, 0%, 10%) 1%,
            hsl(0, 0%, 10%) var(--barwidth),
            hsl(0, 0%, 20%) calc(var(--barwidth) + 0.01%),
            hsl(0, 0%, 20%) calc(var(--barwidth) * 2),
            hsl(0, 0%, 35%) calc(var(--barwidth) * 2 + 0.01%),
            hsl(0, 0%, 35%) calc(var(--barwidth) * 3),
            hsl(0, 0%, 42.5%) calc(var(--barwidth) * 3 + 0.01%),
            hsl(0, 0%, 42.5%) calc(var(--barwidth) * 4),
            hsl(0, 0%, 50%) calc(var(--barwidth) * 4 + 0.01%),
            hsl(0, 0%, 50%) calc(var(--barwidth) * 5),
            hsl(0, 0%, 42.5%) calc(var(--barwidth) * 5 + 0.01%),
            hsl(0, 0%, 42.5%) calc(var(--barwidth) * 6),
            hsl(0, 0%, 35%) calc(var(--barwidth) * 6 + 0.01%),
            hsl(0, 0%, 35%) calc(var(--barwidth) * 7),
            hsl(0, 0%, 20%) calc(var(--barwidth) * 7 + 0.01%),
            hsl(0, 0%, 20%) calc(var(--barwidth) * 8),
            hsl(0, 0%, 10%) calc(var(--barwidth) * 8 + 0.01%),
            hsl(0, 0%, 10%) calc(var(--barwidth) * 9),
            hsl(0, 0%, 0%) calc(var(--barwidth) * 9 + 0.01%),
            hsl(0, 0%, 0%) calc(var(--barwidth) * 10));

    background-size: 400% 400%, 210% 210%;
    background-position: calc(((var(--posx) - 50%) * -2.5) + 50%) calc(((var(--posy) - 50%) * -2.5) + 50%),
        calc(((var(--posx) - 50%) * 1.5) + 50%) calc(((var(--posy) - 50%) * 1.5) + 50%);

    background-blend-mode: exclusion, darken;
    filter: brightness(0.95) contrast(4) saturate(0.75);
    mix-blend-mode: color-dodge;
}